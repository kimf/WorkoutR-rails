<div class="main">
  <h3>
    <%= @workout.date.strftime('%e %B %Y') %>
    <%= SPORT_ICONS[@workout.sport.name] %>
  </h3>
  <h4>
    PLAN:
    <%= t(@workout.planned_sport.name) %>
    <% if @workout.planned_workout_type %>
      -
      <%= t(@workout.planned_workout_type.name) %>
    <% end %>
    <% if @workout.planned_minutes > 0 %>
      -
      <%= number_with_precision(
        @workout.planned_minutes,
        precision: 1,
        strip_insignificant_zeros: true
      ) %> min
    <% end %>
    <% if @workout.planned_km > 0 %>
      -
      <%= number_with_precision(
        @workout.planned_km,
        precision: 1,
        strip_insignificant_zeros: true
      ) %> km
    <% end %>
  </h4>
  <p><%= @workout.description %></p>


  <% if @workout.completed? %>
    <hr />
    <h4>
      VERKLIGHET:
      <%= t(@workout.actual_sport.name) %>
      <% if @workout.actual_workout_type %>
        -
        <%= t(@workout.actual_workout_type.name) %>
      <% end %>
      <% if @workout.actual_minutes > 0 %>
        -
        <%= number_with_precision(
          @workout.actual_minutes,
          precision: 1,
          strip_insignificant_zeros: true
        ) %> min
      <% end %>
      <% if @workout.actual_km > 0 %>
        -
        <%= number_with_precision(
          @workout.actual_km,
          precision: 1,
          strip_insignificant_zeros: true
        ) %> km
      <% end %>
    </h4>
  <% end %>
</div>

<div class="sidebar" data-controller="sidebar" data-sidebar-toggled="false">
  <% if @workout.training_file.attached? %>
    <%= link_to @workout.training_file.attachment.filename.to_s, url_for(@workout.training_file) %>
  <% end %>
  <div class="form">
    <strong>LADDA UPP TRÄNINGSFIL</strong>
    <hr />
    <%= form_with model: @workout, local: true do |form| %>
      <label>
        Datum:
        <%= form.text_field :actual_date, value: @workout.planned_date %>
      </label>
      <br /><br />
      <label>
        Sport:
        <%= form.select(:actual_sport_id, sports.collect {|p| [ p.name, p.id ] }, selected: @workout.planned_sport.id) %>
      </label>
      <br /><br />
      <label>
        Pass-typ:
        <%= form.select(:actual_workout_type_id, workout_types.collect {|p| [ p.name, p.id ] }, selected: @workout.planned_workout_type&.id) %>
      </label>
      <br /><br />
      <label>
        <%= form.file_field :training_file %>
      </label>
      <br /><br />
      <label>
        Noteringar:
        <%= form.text_area :notes %><br><br>
      </label>

      <%= form.submit "SPARA TRÄNINGSPASS" %>
    <% end %>
  </div>
</div>